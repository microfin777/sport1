/*!
 *  GMAP3 Plugin for jQuery
 *  Version   : 6.0.0
 *  Date      : 2014-04-25
 *  Author    : DEMONTE Jean-Baptiste
 *  Contact   : jbdemonte@gmail.com
 *  Web site  : http://gmap3.net
 *  Licence   : GPL v3 : http://www.gnu.org/licenses/gpl.html
 *  
 *  Copyright (c) 2010-2014 Jean-Baptiste DEMONTE
 *  All rights reserved.
 */
!function(t,n){function e(t){return"object"==typeof t}function o(t){return"string"==typeof t}function i(t){return"number"==typeof t}function a(t){return t===n}function s(){E=google.maps,C||(C={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:function(){var n={};return t.each("Map Marker InfoWindow Circle Rectangle OverlayView StreetViewPanorama KmlLayer TrafficLayer BicyclingLayer GroundOverlay StyledMapType ImageMapType".split(" "),(function(t,e){n[e]=E[e]})),n}(),map:{mapTypeId:E.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}function r(t,n){return a(t)?"gmap3_"+(n?S+1:++S):t}function u(n,e,o,i,a){function s(e,i){e&&t.each(e,(function(t,e){var s=n,r=e;_(e)&&(s=e[0],r=e[1]),i(o,t,(function(t){r.apply(s,[a||o,t,u])}))}))}var r=e.td||{},u={id:i,data:r.data,tag:r.tag};s(r.events,E.event.addListener),s(r.onces,E.event.addListenerOnce)}function l(t){var n,e=[];for(n in t)t.hasOwnProperty(n)&&e.push(n);return e}function d(t,n){var e,o=arguments;for(e=2;e<o.length;e++)if(n in o[e]&&o[e].hasOwnProperty(n))return void(t[n]=o[e][n])}function c(n,e){var o,i,a=["data","tag","id","events","onces"],s={};if(n.td)for(o in n.td)n.td.hasOwnProperty(o)&&"options"!==o&&"values"!==o&&(s[o]=n.td[o]);for(i=0;i<a.length;i++)d(s,a[i],e,n.td);return s.options=t.extend({},n.opts||{},e.options||{}),s}function p(){if(C.verbose){var t,n=[];if(window.console&&T(console.error)){for(t=0;t<arguments.length;t++)n.push(arguments[t]);console.error.apply(console,n)}else{for(n="",t=0;t<arguments.length;t++)n+=arguments[t].toString()+" ";alert(n)}}}function f(t){return(i(t)||o(t))&&""!==t&&!isNaN(t)}function g(t){var n,o=[];if(!a(t))if(e(t))if(i(t.length))o=t;else for(n in t)o.push(t[n]);else o.push(t);return o}function h(n){return n?T(n)?n:(n=g(n),function(o){var i;if(a(o))return!1;if(e(o)){for(i=0;i<o.length;i++)if(t.inArray(o[i],n)>=0)return!0;return!1}return t.inArray(o,n)>=0}):void 0}function v(t,n,e){var i=n?t:null;return!t||o(t)?i:t.latLng?v(t.latLng):t instanceof E.LatLng?t:f(t.lat)?new E.LatLng(t.lat,t.lng):!e&&_(t)&&f(t[0])&&f(t[1])?new E.LatLng(t[0],t[1]):i}function m(t){var n,e;return!t||t instanceof E.LatLngBounds?t||null:(_(t)?2===t.length?(n=v(t[0]),e=v(t[1])):4===t.length&&(n=v([t[0],t[1]]),e=v([t[2],t[3]])):"ne"in t&&"sw"in t?(n=v(t.ne),e=v(t.sw)):"n"in t&&"e"in t&&"s"in t&&"w"in t&&(n=v([t.n,t.e]),e=v([t.s,t.w])),n&&e?new E.LatLngBounds(e,n):null)}function y(t,n,e,i,a){var s=!!e&&v(i.td,!1,!0),r=s?{latLng:s}:!!i.td.address&&(o(i.td.address)?{address:i.td.address}:i.td.address),u=!!r&&U.get(r),l=this;r?(a=a||0,u?(i.latLng=u.results[0].geometry.location,i.results=u.results,i.status=u.status,n.apply(t,[i])):(r.location&&(r.location=v(r.location)),r.bounds&&(r.bounds=m(r.bounds)),(D.geocoder||(D.geocoder=new E.Geocoder),D.geocoder).geocode(r,(function(o,s){s===E.GeocoderStatus.OK?(U.store(r,{results:o,status:s}),i.latLng=o[0].geometry.location,i.results=o,i.status=s,n.apply(t,[i])):s===E.GeocoderStatus.OVER_QUERY_LIMIT&&a<C.queryLimit.attempt?setTimeout((function(){y.apply(l,[t,n,e,i,a+1])}),C.queryLimit.delay+Math.floor(Math.random()*C.queryLimit.random)):(p("geocode failed",s,r),i.latLng=i.results=!1,i.status=s,n.apply(t,[i]))})))):(i.latLng=v(i.td,!1,!0),n.apply(t,[i]))}function w(n,e,o,i){var a=this,s=-1;!function r(){do{s++}while(s<n.length&&!("address"in n[s]));return s>=n.length?void o.apply(e,[i]):void y(a,(function(e){delete e.td,t.extend(n[s],e),r.apply(a,[])}),!0,{td:n[s]})}()}function L(t,n,e){var o=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition((function(i){o||(o=!0,e.latLng=new E.LatLng(i.coords.latitude,i.coords.longitude),n.apply(t,[e]))}),(function(){o||(o=!0,e.latLng=!1,n.apply(t,[e]))}),e.opts.getCurrentPosition):(e.latLng=!1,n.apply(t,[e]))}function b(t){var n,o=!1;if(e(t)&&t.hasOwnProperty("get")){for(n in t)if("get"!==n)return!1;o=!t.get.hasOwnProperty("callback")}return o}function x(){var t=[],n=this;n.empty=function(){return!t.length},n.add=function(n){t.push(n)},n.get=function(){return!!t.length&&t[0]},n.ack=function(){t.shift()}}function M(){function n(t){return{id:t.id,name:t.name,object:t.obj,tag:t.tag,data:t.data}}function e(t){T(t.setMap)&&t.setMap(null),T(t.remove)&&t.remove(),T(t.free)&&t.free(),t=null}var o={},i={},s=this;s.add=function(t,n,e,a){var u=t.td||{},l=r(u.id);return o[n]||(o[n]=[]),l in i&&s.clearById(l),i[l]={obj:e,sub:a,name:n,id:l,tag:u.tag,data:u.data},o[n].push(l),l},s.getById=function(t,e,o){var a=!1;return t in i&&(a=e?i[t].sub:o?n(i[t]):i[t].obj),a},s.get=function(t,e,a,s){var r,u,l=h(a);if(!o[t]||!o[t].length)return null;for(r=o[t].length;r;)if(r--,(u=o[t][e?r:o[t].length-r-1])&&i[u]){if(l&&!l(i[u].tag))continue;return s?n(i[u]):i[u].obj}return null},s.all=function(t,e,s){var r=[],u=h(e),l=function(t){var e,a;for(e=0;e<o[t].length;e++)if((a=o[t][e])&&i[a]){if(u&&!u(i[a].tag))continue;r.push(s?n(i[a]):i[a].obj)}};if(t in o)l(t);else if(a(t))for(t in o)l(t);return r},s.rm=function(t,n,e){var a,r;if(!o[t])return!1;if(n)if(e)for(a=o[t].length-1;a>=0&&(r=o[t][a],!n(i[r].tag));a--);else for(a=0;a<o[t].length&&(r=o[t][a],!n(i[r].tag));a++);else a=e?o[t].length-1:0;return a in o[t]&&s.clearById(o[t][a],a)},s.clearById=function(t,n){if(t in i){var s,r=i[t].name;for(s=0;a(n)&&s<o[r].length;s++)t===o[r][s]&&(n=s);return e(i[t].obj),i[t].sub&&e(i[t].sub),delete i[t],o[r].splice(n,1),!0}return!1},s.objGetById=function(t){var n,e;if(o.clusterer)for(e in o.clusterer)if(!1!==(n=i[o.clusterer[e]].obj.getById(t)))return n;return!1},s.objClearById=function(t){var n;if(o.clusterer)for(n in o.clusterer)if(i[o.clusterer[n]].obj.clearById(t))return!0;return null},s.clear=function(t,n,e,i){var a,r,u,l=h(i);if(t&&t.length)t=g(t);else for(a in t=[],o)t.push(a);for(r=0;r<t.length;r++)if(u=t[r],n)s.rm(u,l,!0);else if(e)s.rm(u,l,!1);else for(;s.rm(u,l,!1););},s.objClear=function(n,e,a,s){var r;if(o.clusterer&&(t.inArray("marker",n)>=0||!n.length))for(r in o.clusterer)i[o.clusterer[r]].obj.clear(e,a,s)}}function I(n,e,i){function a(){var t;for(t in i)if(i.hasOwnProperty(t)&&!r.hasOwnProperty(t))return t}var s,r={},u=this,l={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};o(i)&&(i=function(t){var n={};return n[t]={},n}(i)),u.run=function(){for(var o,u;o=a();){if(T(n[o]))return s=o,u=t.extend(!0,{},C[o]||{},i[o].options||{}),void(o in l.latLng?i[o].values?w(i[o].values,n,n[o],{td:i[o],opts:u,session:r}):y(n,n[o],l.latLng[o],{td:i[o],opts:u,session:r}):o in l.geoloc?L(n,n[o],{td:i[o],opts:u,session:r}):n[o].apply(n,[{td:i[o],opts:u,session:r}]));r[o]=null}e.apply(n,[i,r])},u.ack=function(t){r[s]=t,u.run.apply(u,[])}}function P(){return D.es||(D.es=new E.ElevationService),D.es}function k(n,o,i){function a(t){j[t]||(delete O[t].options.map,j[t]=new C.classes.Marker(O[t].options),u(n,{td:O[t]},j[t],O[t].id))}function s(t){e(P[t])?(T(P[t].obj.setMap)&&P[t].obj.setMap(null),T(P[t].obj.remove)&&P[t].obj.remove(),T(P[t].shadow.remove)&&P[t].obj.remove(),T(P[t].shadow.setMap)&&P[t].shadow.setMap(null),delete P[t].obj,delete P[t].shadow):j[t]&&j[t].setMap(null),delete P[t]}function l(){var t=function(){var t,n,e,o,i,a,s,r,u=Math.cos,l=Math.sin,d=arguments;return d[0]instanceof E.LatLng?(t=d[0].lat(),e=d[0].lng(),d[1]instanceof E.LatLng?(n=d[1].lat(),o=d[1].lng()):(n=d[1],o=d[2])):(t=d[0],e=d[1],d[2]instanceof E.LatLng?(n=d[2].lat(),o=d[2].lng()):(n=d[2],o=d[3])),i=Math.PI*t/180,a=Math.PI*e/180,s=Math.PI*n/180,r=Math.PI*o/180,6371e3*Math.acos(Math.min(u(i)*u(s)*u(a)*u(r)+u(i)*l(a)*u(s)*l(r)+l(i)*l(s),1))}(o.getCenter(),o.getBounds().getNorthEast());return new E.Circle({center:o.getCenter(),radius:1.25*t}).getBounds()}function d(){clearTimeout(f),f=setTimeout(p,25)}function c(t){var n=g.fromLatLngToDivPixel(t),e=g.fromDivPixelToLatLng(new E.Point(n.x+i.radius,n.y-i.radius)),o=g.fromDivPixelToLatLng(new E.Point(n.x-i.radius,n.y+i.radius));return new E.LatLngBounds(o,e)}function p(){if(!y&&!L&&b){var n,e,a,r,u,d,p,f,g,h,M,I=!1,k=[],B={},j=o.getZoom(),C="maxZoom"in i&&j>i.maxZoom,T=function(){var t,n={};for(t in P)n[t]=!0;return n}();for(w=!1,j>3&&(I=(u=l()).getSouthWest().lng()<u.getNorthEast().lng()),n=0;n<O.length;n++)!O[n]||I&&!u.contains(O[n].options.position)||v&&!v(S[n])||k.push(n);for(;;){for(n=0;B[n]&&n<k.length;)n++;if(n===k.length)break;if(r=[],x&&!C){M=10;do{for(f=r,r=[],M--,p=f.length?u.getCenter():O[k[n]].options.position,u=c(p),e=n;e<k.length;e++)B[e]||u.contains(O[k[e]].options.position)&&r.push(e)}while(f.length<r.length&&r.length>1&&M)}else for(e=n;e<k.length;e++)if(!B[e]){r.push(e);break}for(d={indexes:[],ref:[]},g=h=0,a=0;a<r.length;a++)B[r[a]]=!0,d.indexes.push(k[r[a]]),d.ref.push(k[r[a]]),g+=O[k[r[a]]].options.position.lat(),h+=O[k[r[a]]].options.position.lng();g/=r.length,h/=r.length,d.latLng=new E.LatLng(g,h),d.ref=d.ref.join("-"),d.ref in T?delete T[d.ref]:(1===r.length&&(P[d.ref]=!0),m(d))}t.each(T,(function(t){s(t)})),L=!1}}var f,g,v,m,y=!1,w=!1,L=!1,b=!1,x=!0,M=this,I=[],P={},k={},B={},j=[],O=[],S=[],_=function(t){function n(){var t=this;return t.onAdd=function(){},t.onRemove=function(){},t.draw=function(){},C.classes.OverlayView.apply(t,[])}n.prototype=C.classes.OverlayView.prototype;var e=new n;return e.setMap(t),e}(o,i.radius);(function t(){return(g=_.getProjection())?(b=!0,I.push(E.event.addListener(o,"zoom_changed",d)),I.push(E.event.addListener(o,"bounds_changed",d)),void p()):void setTimeout((function(){t.apply(M,[])}),25)})(),M.getById=function(t){return t in k&&(a(k[t]),j[k[t]])},M.rm=function(t){var n=k[t];j[n]&&j[n].setMap(null),delete j[n],j[n]=!1,delete O[n],O[n]=!1,delete S[n],S[n]=!1,delete k[t],delete B[n],w=!0},M.clearById=function(t){return t in k?(M.rm(t),!0):void 0},M.clear=function(t,n,e){var o,i,a,s,r,u=[],l=h(e);for(t?(o=O.length-1,i=-1,a=-1):(o=0,i=O.length,a=1),s=o;s!==i&&(!O[s]||l&&!l(O[s].tag)||(u.push(B[s]),!n&&!t));s+=a);for(r=0;r<u.length;r++)M.rm(u[r])},M.add=function(t,n){t.id=r(t.id),M.clearById(t.id),k[t.id]=j.length,B[j.length]=t.id,j.push(null),O.push(t),S.push(n),w=!0},M.addMarker=function(t,e){(e=e||{}).id=r(e.id),M.clearById(e.id),e.options||(e.options={}),e.options.position=t.getPosition(),u(n,{td:e},t,e.id),k[e.id]=j.length,B[j.length]=e.id,j.push(t),O.push(e),S.push(e.data||{}),w=!0},M.td=function(t){return O[t]},M.value=function(t){return S[t]},M.marker=function(t){return t in j&&(a(t),j[t])},M.markerIsSet=function(t){return Boolean(j[t])},M.setMarker=function(t,n){j[t]=n},M.store=function(t,n,e){P[t.ref]={obj:n,shadow:e}},M.free=function(){var n;for(n=0;n<I.length;n++)E.event.removeListener(I[n]);I=[],t.each(P,(function(t){s(t)})),P={},t.each(O,(function(t){O[t]=null})),O=[],t.each(j,(function(t){j[t]&&(j[t].setMap(null),delete j[t])})),j=[],t.each(S,(function(t){delete S[t]})),S=[],k={},B={}},M.filter=function(t){v=t,p()},M.enable=function(t){x!==t&&(x=t,p())},M.display=function(t){m=t},M.error=function(t){t},M.beginUpdate=function(){y=!0},M.endUpdate=function(){y=!1,w&&p()},M.autofit=function(t){var n;for(n=0;n<O.length;n++)O[n]&&t.extend(O[n].options.position)}}function B(t,n){var e=this;e.id=function(){return t},e.filter=function(t){n.filter(t)},e.enable=function(){n.enable(!0)},e.disable=function(){n.enable(!1)},e.add=function(t,e,o){o||n.beginUpdate(),n.addMarker(t,e),o||n.endUpdate()},e.getById=function(t){return n.getById(t)},e.clearById=function(t,e){var o;return e||n.beginUpdate(),o=n.clearById(t),e||n.endUpdate(),o},e.clear=function(t,e,o,i){i||n.beginUpdate(),n.clear(t,e,o),i||n.endUpdate()}}function j(n,e,o,i){var a=this,s=[];C.classes.OverlayView.call(a),a.setMap(n),a.onAdd=function(){var n=a.getPanes();e.pane in n&&t(n[e.pane]).append(i),t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),(function(n,e){s.push(E.event.addDomListener(i[0],e,(function(n){t.Event(n).stopPropagation(),E.event.trigger(a,e,[n]),a.draw()})))})),s.push(E.event.addDomListener(i[0],"contextmenu",(function(n){t.Event(n).stopPropagation(),E.event.trigger(a,"rightclick",[n]),a.draw()})))},a.getPosition=function(){return o},a.setPosition=function(t){o=t,a.draw()},a.draw=function(){var t=a.getProjection().fromLatLngToDivPixel(o);i.css("left",t.x+e.offset.x+"px").css("top",t.y+e.offset.y+"px")},a.onRemove=function(){var t;for(t=0;t<s.length;t++)E.event.removeListener(s[t]);i.remove()},a.hide=function(){i.hide()},a.show=function(){i.show()},a.toggle=function(){i&&(i.is(":visible")?a.show():a.hide())},a.toggleDOM=function(){a.setMap(a.getMap()?null:n)},a.getDOMElement=function(){return i[0]}}function O(i){function s(){!L&&(L=O.get())&&L.run()}function l(){L=null,O.ack(),s.call(b)}function d(t){var n,e=t.td.callback;e&&(n=Array.prototype.slice.call(arguments,1),T(e)?e.apply(i,n):_(e)&&T(e[1])&&e[1].apply(e[0],n))}function f(t,n,e){e&&u(i,t,n,e),d(t,n),L.ack(n)}function h(n,e){var o=(e=e||{}).td&&e.td.options?e.td.options:0;U?o&&(o.center&&(o.center=v(o.center)),U.setOptions(o)):((o=e.opts||t.extend(!0,{},C.map,o||{})).center=n||v(o.center),U=new C.classes.Map(i.get(0),o))}function y(e){var o,a,s=new k(i,U,e),r={},l={},d=[],c=/^[0-9]+$/;for(a in e)c.test(a)?(d.push(1*a),l[a]=e[a],l[a].width=l[a].width||0,l[a].height=l[a].height||0):r[a]=e[a];return d.sort((function(t,n){return t>n})),o=r.calculator?function(n){var e=[];return t.each(n,(function(t,n){e.push(s.value(n))})),r.calculator.apply(i,[e])}:function(t){return t.length},s.error((function(){p.apply(b,arguments)})),s.display((function(a){var c,p,f,g,h,m,y=o(a.indexes);if(e.force||y>1)for(c=0;c<d.length;c++)d[c]<=y&&(p=l[d[c]]);p?(h=p.offset||[-p.width/2,-p.height/2],(f=t.extend({},r)).options=t.extend({pane:"overlayLayer",content:p.content?p.content.replace("CLUSTER_COUNT",y):"",offset:{x:("x"in h?h.x:h[0])||0,y:("y"in h?h.y:h[1])||0}},r.options||{}),g=b.overlay({td:f,opts:f.options,latLng:v(a)},!0),f.options.pane="floatShadow",f.options.content=t(document.createElement("div")).width(p.width+"px").height(p.height+"px").css({cursor:"pointer"}),m=b.overlay({td:f,opts:f.options,latLng:v(a)},!0),r.data={latLng:v(a),markers:[]},t.each(a.indexes,(function(t,n){r.data.markers.push(s.value(n)),s.markerIsSet(n)&&s.marker(n).setMap(null)})),u(i,{td:r},m,n,{main:g,shadow:m}),s.store(a,g,m)):t.each(a.indexes,(function(t,n){s.marker(n).setMap(U)}))})),s}function w(n,e,o){var a=[],s="values"in n.td;return s||(n.td.values=[{options:n.opts}]),n.td.values.length?(h(),t.each(n.td.values,(function(t,s){var r,l,d,p,f=c(n,s);if(f.options[o])if(f.options[o][0][0]&&_(f.options[o][0][0]))for(l=0;l<f.options[o].length;l++)for(d=0;d<f.options[o][l].length;d++)f.options[o][l][d]=v(f.options[o][l][d]);else for(l=0;l<f.options[o].length;l++)f.options[o][l]=v(f.options[o][l]);f.options.map=U,p=new E[e](f.options),a.push(p),r=S.add({td:f},e.toLowerCase(),p),u(i,{td:f},p,r)})),void f(n,s?a:a[0])):void f(n,!1)}var L,b=this,O=new x,S=new M,U=null;b._plan=function(t){var n;for(n=0;n<t.length;n++)O.add(new I(b,l,t[n]));s()},b.map=function(t){h(t.latLng,t),u(i,t,U),f(t,U)},b.destroy=function(t){S.clear(),i.empty(),U&&(U=null),f(t,!0)},b.overlay=function(n,e){var o=[],a="values"in n.td;return a||(n.td.values=[{latLng:n.latLng,options:n.opts}]),n.td.values.length?(j.__initialised||(j.prototype=new C.classes.OverlayView,j.__initialised=!0),t.each(n.td.values,(function(a,s){var r,l,d=c(n,s),p=t(document.createElement("div")).css({border:"none",borderWidth:0,position:"absolute"});p.append(d.options.content),l=new j(U,d.options,v(d)||v(s),p),o.push(l),p=null,e||(r=S.add(n,"overlay",l),u(i,{td:d},l,r))})),e?o[0]:void f(n,a?o:o[0])):void f(n,!1)},b.marker=function(n){var e,o,a,s="values"in n.td,l=!U;return s||(n.opts.position=n.latLng||v(n.opts.position),n.td.values=[{options:n.opts}]),n.td.values.length?(l&&h(),n.td.cluster&&!U.getBounds()?void E.event.addListenerOnce(U,"bounds_changed",(function(){b.marker.apply(b,[n])})):void(n.td.cluster?(n.td.cluster instanceof B?(o=n.td.cluster,a=S.getById(o.id(),!0)):(a=y(n.td.cluster),o=new B(r(n.td.id,!0),a),S.add(n,"clusterer",o,a)),a.beginUpdate(),t.each(n.td.values,(function(t,e){var o=c(n,e);o.options.position=v(o.options.position?o.options.position:e),o.options.position&&(o.options.map=U,l&&(U.setCenter(o.options.position),l=!1),a.add(o,e))})),a.endUpdate(),f(n,o)):(e=[],t.each(n.td.values,(function(t,o){var a,s,r=c(n,o);r.options.position=v(r.options.position?r.options.position:o),r.options.position&&(r.options.map=U,l&&(U.setCenter(r.options.position),l=!1),s=new C.classes.Marker(r.options),e.push(s),a=S.add({td:r},"marker",s),u(i,{td:r},s,a))})),f(n,s?e:e[0])))):void f(n,!1)},b.getroute=function(t){t.opts.origin=v(t.opts.origin,!0),t.opts.destination=v(t.opts.destination,!0),(D.ds||(D.ds=new E.DirectionsService),D.ds).route(t.opts,(function(n,e){d(t,e===E.DirectionsStatus.OK&&n,e),L.ack()}))},b.getdistance=function(t){var n;for(t.opts.origins=g(t.opts.origins),n=0;n<t.opts.origins.length;n++)t.opts.origins[n]=v(t.opts.origins[n],!0);for(t.opts.destinations=g(t.opts.destinations),n=0;n<t.opts.destinations.length;n++)t.opts.destinations[n]=v(t.opts.destinations[n],!0);(D.dms||(D.dms=new E.DistanceMatrixService),D.dms).getDistanceMatrix(t.opts,(function(n,e){d(t,e===E.DistanceMatrixStatus.OK&&n,e),L.ack()}))},b.infowindow=function(e){var o=[],s="values"in e.td;s||(e.latLng&&(e.opts.position=e.latLng),e.td.values=[{options:e.opts}]),t.each(e.td.values,(function(t,r){var l,d,p=c(e,r);p.options.position=v(p.options.position?p.options.position:r.latLng),U||h(p.options.position),(d=new C.classes.InfoWindow(p.options))&&(a(p.open)||p.open)&&(s?d.open(U,p.anchor||n):d.open(U,p.anchor||(e.latLng?n:e.session.marker?e.session.marker:n))),o.push(d),l=S.add({td:p},"infowindow",d),u(i,{td:p},d,l)})),f(e,s?o:o[0])},b.circle=function(n){var e=[],o="values"in n.td;return o||(n.opts.center=n.latLng||v(n.opts.center),n.td.values=[{options:n.opts}]),n.td.values.length?(t.each(n.td.values,(function(t,o){var a,s,r=c(n,o);r.options.center=v(r.options.center?r.options.center:o),U||h(r.options.center),r.options.map=U,s=new C.classes.Circle(r.options),e.push(s),a=S.add({td:r},"circle",s),u(i,{td:r},s,a)})),void f(n,o?e:e[0])):void f(n,!1)},b.getaddress=function(t){d(t,t.results,t.status),L.ack()},b.getlatlng=function(t){d(t,t.results,t.status),L.ack()},b.getmaxzoom=function(t){(D.mzs||(D.mzs=new E.MaxZoomService),D.mzs).getMaxZoomAtLatLng(t.latLng,(function(n){d(t,n.status===E.MaxZoomStatus.OK&&n.zoom,status),L.ack()}))},b.getelevation=function(t){var n,e=[],o=function(n,e){d(t,e===E.ElevationStatus.OK&&n,e),L.ack()};if(t.latLng)e.push(t.latLng);else for(e=g(t.td.locations||[]),n=0;n<e.length;n++)e[n]=v(e[n]);if(e.length)P().getElevationForLocations({locations:e},o);else{if(t.td.path&&t.td.path.length)for(n=0;n<t.td.path.length;n++)e.push(v(t.td.path[n]));e.length?P().getElevationAlongPath({path:e,samples:t.td.samples},o):L.ack()}},b.defaults=function(n){t.each(n.td,(function(n,o){C[n]=e(C[n])?t.extend({},C[n],o):o})),L.ack(!0)},b.rectangle=function(n){var e=[],o="values"in n.td;return o||(n.td.values=[{options:n.opts}]),n.td.values.length?(t.each(n.td.values,(function(t,o){var a,s,r=c(n,o);r.options.bounds=m(r.options.bounds?r.options.bounds:o),U||h(r.options.bounds.getCenter()),r.options.map=U,s=new C.classes.Rectangle(r.options),e.push(s),a=S.add({td:r},"rectangle",s),u(i,{td:r},s,a)})),void f(n,o?e:e[0])):void f(n,!1)},b.polyline=function(t){w(t,"Polyline","path")},b.polygon=function(t){w(t,"Polygon","paths")},b.trafficlayer=function(t){h();var n=S.get("trafficlayer");n||((n=new C.classes.TrafficLayer).setMap(U),S.add(t,"trafficlayer",n)),f(t,n)},b.bicyclinglayer=function(t){h();var n=S.get("bicyclinglayer");n||((n=new C.classes.BicyclingLayer).setMap(U),S.add(t,"bicyclinglayer",n)),f(t,n)},b.groundoverlay=function(t){t.opts.bounds=m(t.opts.bounds),t.opts.bounds&&h(t.opts.bounds.getCenter());var n=new C.classes.GroundOverlay(t.opts.url,t.opts.bounds,t.opts.opts);n.setMap(U),f(t,n,S.add(t,"groundoverlay",n))},b.streetviewpanorama=function(n){n.opts.opts||(n.opts.opts={}),n.latLng?n.opts.opts.position=n.latLng:n.opts.opts.position&&(n.opts.opts.position=v(n.opts.opts.position)),n.td.divId?n.opts.container=document.getElementById(n.td.divId):n.opts.container&&(n.opts.container=t(n.opts.container).get(0));var e=new C.classes.StreetViewPanorama(n.opts.container,n.opts.opts);e&&U.setStreetView(e),f(n,e,S.add(n,"streetviewpanorama",e))},b.kmllayer=function(n){var e=[],o="values"in n.td;return o||(n.td.values=[{options:n.opts}]),n.td.values.length?(t.each(n.td.values,(function(t,o){var a,s,r,l=c(n,o);U||h(),r=l.options,l.options.opts&&(r=l.options.opts,l.options.url&&(r.url=l.options.url)),r.map=U,s=function(t){var n,e=E.version.split(".");for(t=t.split("."),n=0;n<e.length;n++)e[n]=parseInt(e[n],10);for(n=0;n<t.length;n++){if(t[n]=parseInt(t[n],10),!e.hasOwnProperty(n))return!1;if(e[n]<t[n])return!1}return!0}("3.10")?new C.classes.KmlLayer(r):new C.classes.KmlLayer(r.url,r),e.push(s),a=S.add({td:l},"kmllayer",s),u(i,{td:l},s,a)})),void f(n,o?e:e[0])):void f(n,!1)},b.panel=function(n){h();var e,o=0,s=0,r=t(document.createElement("div"));r.css({position:"absolute",zIndex:1e3,visibility:"hidden"}),n.opts.content&&(e=t(n.opts.content),r.append(e),i.first().prepend(r),a(n.opts.left)?a(n.opts.right)?n.opts.center&&(o=(i.width()-e.width())/2):o=i.width()-e.width()-n.opts.right:o=n.opts.left,a(n.opts.top)?a(n.opts.bottom)?n.opts.middle&&(s=(i.height()-e.height())/2):s=i.height()-e.height()-n.opts.bottom:s=n.opts.top,r.css({top:s,left:o,visibility:"visible"})),f(n,r,S.add(n,"panel",r)),r=null},b.directionsrenderer=function(n){n.opts.map=U;var e=new E.DirectionsRenderer(n.opts);n.td.divId?e.setPanel(document.getElementById(n.td.divId)):n.td.container&&e.setPanel(t(n.td.container).get(0)),f(n,e,S.add(n,"directionsrenderer",e))},b.getgeoloc=function(t){f(t,t.latLng)},b.styledmaptype=function(t){h();var n=new C.classes.StyledMapType(t.td.styles,t.opts);U.mapTypes.set(t.td.id,n),f(t,n)},b.imagemaptype=function(t){h();var n=new C.classes.ImageMapType(t.opts);U.mapTypes.set(t.td.id,n),f(t,n)},b.autofit=function(n){var e=new E.LatLngBounds;t.each(S.all(),(function(t,n){n.getPosition?e.extend(n.getPosition()):n.getBounds?(e.extend(n.getBounds().getNorthEast()),e.extend(n.getBounds().getSouthWest())):n.getPaths?n.getPaths().forEach((function(t){t.forEach((function(t){e.extend(t)}))})):n.getPath?n.getPath().forEach((function(t){e.extend(t)})):n.getCenter?e.extend(n.getCenter()):n instanceof B&&((n=S.getById(n.id(),!0))&&n.autofit(e))})),e.isEmpty()||U.getBounds()&&U.getBounds().equals(e)||("maxZoom"in n.td&&E.event.addListenerOnce(U,"bounds_changed",(function(){this.getZoom()>n.td.maxZoom&&this.setZoom(n.td.maxZoom)})),U.fitBounds(e)),f(n,!0)},b.clear=function(n){if(o(n.td)){if(S.clearById(n.td)||S.objClearById(n.td))return void f(n,!0);n.td={name:n.td}}n.td.id?t.each(g(n.td.id),(function(t,n){S.clearById(n)||S.objClearById(n)})):(S.clear(g(n.td.name),n.td.last,n.td.first,n.td.tag),S.objClear(g(n.td.name),n.td.last,n.td.first,n.td.tag)),f(n,!0)},b.get=function(e,i,a){var s,r,u=i?e:e.td;return i||(a=u.full),o(u)?!1===(r=S.getById(u,!1,a)||S.objGetById(u))&&(s=u,u={}):s=u.name,"map"===s&&(r=U),r||(r=[],u.id?(t.each(g(u.id),(function(t,n){r.push(S.getById(n,!1,a)||S.objGetById(n))})),_(u.id)||(r=r[0])):(t.each(s?g(s):[n],(function(n,e){var o;u.first?(o=S.get(e,!1,u.tag,a))&&r.push(o):u.all?t.each(S.all(e,u.tag,a),(function(t,n){r.push(n)})):(o=S.get(e,!0,u.tag,a))&&r.push(o)})),u.all||_(s)||(r=r[0]))),r=_(r)||!u.all?r:[r],i?r:void f(e,r)},b.exec=function(n){t.each(g(n.td.func),(function(e,o){t.each(b.get(n.td,!0,!n.td.hasOwnProperty("full")||n.td.full),(function(t,n){o.call(i,n)}))})),f(n,!0)},b.trigger=function(n){if(o(n.td))E.event.trigger(U,n.td);else{var e=[U,n.td.eventName];n.td.var_args&&t.each(n.td.var_args,(function(t,n){e.push(n)})),E.event.trigger.apply(E.event,e)}d(n),L.ack()}}var C,E,S=0,T=t.isFunction,_=t.isArray,D={},U=new function(){var t=[];this.get=function(n){if(t.length){var o,i,a,s,r,u=l(n);for(o=0;o<t.length;o++){for(s=t[o],r=u.length===s.keys.length,i=0;i<u.length&&r;i++)(r=(a=u[i])in s.request)&&(r=e(n[a])&&"equals"in n[a]&&T(n[a])?n[a].equals(s.request[a]):n[a]===s.request[a]);if(r)return s.results}}},this.store=function(n,e){t.push({request:n,keys:l(n),results:e})}};t.fn.gmap3=function(){var n,e=[],o=[];for(s(),n=0;n<arguments.length;n++)arguments[n]&&e.push(arguments[n]);return e.length||e.push("map"),t.each(this,(function(){var n=t(this),i=n.data("gmap3");!1,i||(i=new O(n),n.data("gmap3",i)),1!==e.length||"get"!==e[0]&&!b(e[0])?i._plan(e):o.push("get"===e[0]?i.get("map",!0):i.get(e[0].get,!0,e[0].get.full))})),o.length?1===o.length?o[0]:o:this}}(jQuery);